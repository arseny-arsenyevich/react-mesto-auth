{"version":3,"sources":["images/logo.svg","images/auth-success.svg","images/auth-fail.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/Input.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/PopupWithDelete.js","components/InfoTooltip.js","utils/api.js","components/ProtectedRoute.js","components/Login.js","components/Register.js","utils/apiAuth.js","components/LoginService.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","logoPic","headerLink","headerLinkTitle","headerBurger","setLoggedIn","email","loading","useState","burgerState","setBurgerState","handleSignOut","localStorage","removeItem","className","to","onClick","src","alt","e","preventDefault","type","CurrentUserContext","React","createContext","Card","card","onDelete","onCardClick","onCardLike","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","onCardDelete","avatar","about","map","Footer","PopupWithForm","isOpen","onClose","onSubmit","title","children","buttonTxt","buttonState","target","currentTarget","disabled","Input","validationTimer","inputRef","validities","setButtonState","placeholder","minLength","maxLength","additionalClass","inputError","setInputError","justOpened","setJustOpened","inputTimer","setInputTimer","history","useHistory","handleChange","useCallback","evt","clearTimeout","setTimeout","a","current","validity","valid","validationMessage","useEffect","addEventListener","removeEventListener","id","ref","required","EditProfilePopup","onUpdateUser","nameInput","useRef","descriptionInput","value","EditAvatarPopup","onUpdateAvatar","avatarInput","AddPlacePopup","linkInput","ImagePopup","cardName","cardId","PopupWithDelete","InfoToolTip","statusPic","statusText","api","baseUrl","headers","this","_url","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkResponse","body","JSON","stringify","ProtectedRoute","path","loggedIn","Login","emailInput","passwordInput","password","Register","apiAuth","getItem","loginService","callbacks","signIn","setItem","token","signUp","checkToken","emit","data","forEach","cb","push","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlaceOpen","setIsAddPlaceOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","selectedCardName","setSelectedCardName","selectedCardId","setSelectedCardId","isDeletePopupOpen","setIsDeletePopupOpen","cardToBeDeleted","setCardToBeDeleted","isAuthStatusPopupOpen","setIsAuthStatusPopupOpen","authStatusPic","setAuthStatusPic","authStatusText","setAuthStatusText","setCards","setCurrentUser","setEmail","setLoading","handleEscClose","key","closeAllPopups","document","handleAuthStatusPopup","result","text","success","fail","catch","console","log","on","info","all","getUserInfo","getCards","userData","cardsData","finally","Provider","exact","logo","changeLikeCardStatus","newCard","state","c","description","redactProfile","redactAvatar","addCard","deleteCard","filter","onAuthStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.a7fa439e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.abb64ac9.svg\";","export default __webpack_public_path__ + \"static/media/auth-success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/auth-fail.7c6a020b.svg\";","import React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Header ({ logoPic, headerLink, headerLinkTitle, headerBurger, setLoggedIn, email, loading }) {\r\n    const [burgerState, setBurgerState] = useState(false);\r\n\r\n    const handleChangeBurgerState = (e) => {\r\n        e.preventDefault();\r\n        setBurgerState(!burgerState);\r\n    }\r\n\r\n    const handleSignOut = () => {\r\n        setLoggedIn && setLoggedIn(false);\r\n        setLoggedIn && localStorage.removeItem('token');\r\n    }\r\n\r\n    return(\r\n        <header className='header header_position_center' aria-label='шапка'>\r\n            {headerBurger && <div className={`header__burger \r\n                header__burger_res_mobile \r\n                ${burgerState && 'header__burger_opened'}`}\r\n            >\r\n                {headerBurger && <p className='header__email'>{email}</p>}\r\n                <Link \r\n                    to={headerLink}  \r\n                    className='header__link header__link_theme_dark'\r\n                    onClick={handleSignOut}\r\n                >\r\n                    {headerLinkTitle}\r\n                </Link>\r\n            </div>}\r\n            <div className={`header__loading ${loading && 'header__loading_active'}`} />\r\n            <div className='header__container'>\r\n                <Link \r\n                    to={`${!loading && '/cards'}`}  \r\n                    className={`header__link ${loading && 'header__link_loading'}`}\r\n                >\r\n                    <img \r\n                        className={`header__logo ${loading && 'header__logo_loading'}`} \r\n                        src={logoPic} alt='логотип' \r\n                    />\r\n                </Link>\r\n                <div className={`header__burger ${headerBurger && 'header__burger_res_desktop'}`}>\r\n                    {headerBurger && <p className='header__email'>{email}</p>}\r\n                    <Link \r\n                        to={headerLink} \r\n                        className={`header__link ${headerBurger && 'header__link_theme_dark'}`}\r\n                        onClick={handleSignOut}\r\n                    >\r\n                        {headerLinkTitle}\r\n                    </Link>\r\n                </div>\r\n                {headerBurger && <button \r\n                    onClick={handleChangeBurgerState}\r\n                    type='button' \r\n                    className={`header__burger-icon ${burgerState && 'header__burger-icon_opened'}`}\r\n                ><span /></button>}\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header","import React from 'react'\r\n\r\nexport const CurrentUserContext = React.createContext()","import React, { useContext } from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction Card ({ card, onDelete, onCardClick, onCardLike }) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `elements__trash ${!isOwn ? 'elements__trash_hidden' : ''}`\r\n    ); \r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = (\r\n        `elements__like-button ${isLiked ? 'elements__like-button_active' : ''}`\r\n    );\r\n\r\n    return (\r\n        <li className='elements__card'>\r\n        <button onClick={() => {onDelete(card)}} className={cardDeleteButtonClassName}>\r\n            <div className='elements__trash-icon' />\r\n        </button>\r\n        <div className='elements__background'>\r\n            <img className='elements__picture' onClick={() => {onCardClick([card.link, card.name, card._id])}} src={card.link} alt='пейзаж' />\r\n        </div>\r\n        <div className='elements__text-area'>\r\n            <h2 className='elements__title'>{card.name}</h2>\r\n            <div className='elements__like'>\r\n                <button onClick={() => {onCardLike(card)}} className={cardLikeButtonClassName} type='button'></button>\r\n                <p className='elements__like-counter'>{card.likes.length}</p>\r\n            </div>\r\n        </div>\r\n    </li>\r\n    )\r\n}\r\n\r\nexport default Card","import React, { useContext } from 'react'\r\nimport Card from './Card'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction Main ({ cards, onEditAvatar, onEditProfile, onAddPlace, onCardLike, onCardDelete, onCardClick }) {\r\n    const currentUser = useContext(CurrentUserContext)\r\n\r\n    return(\r\n        <main className='main'>\r\n            <section className='profile profile_position_center'>\r\n                <div className = 'profile__picture-edit'>\r\n                    <img className='profile__picture' src={currentUser.avatar} alt='Фотография исследователя' />\r\n                    <button className='profile__picture-edit-button' type='button'\r\n                        onClick={onEditAvatar}\r\n                    ></button>\r\n                </div>\r\n                <div className='profile__name-box'>\r\n                    <h1 className='profile__name'>{currentUser.name}</h1>\r\n                    <button className='profile__edit-button' type='button'\r\n                        onClick={onEditProfile}\r\n                    ></button>\r\n                    <p className='profile__profession'>{currentUser.about}</p>\r\n                </div>\r\n                <button className='profile__add-button' type='button'\r\n                    onClick={onAddPlace}\r\n                ></button> \r\n            </section>\r\n\r\n            <section className='elements' aria-label='места'>\r\n                <p className={`elements__empty ${!cards.length && 'elements__empty_active'}`}>Добавьте картинки</p>\r\n                <ul className='elements__table'>\r\n                    {cards.map((card) => {\r\n                        return (\r\n                            <Card \r\n                                onCardLike={onCardLike}\r\n                                onDelete={onCardDelete}\r\n                                onCardClick={onCardClick} \r\n                                key={card._id} \r\n                                card={card} \r\n                            />\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Main","import React from 'react'\r\n\r\nfunction Footer () {\r\n    return(\r\n        <footer className='footer footer_position_center'>\r\n            <p className='footer__copy'>&copy; 2021 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from 'react'\r\n\r\nfunction PopupWithForm ({ name, isOpen, onClose, onSubmit, title, children, buttonTxt, buttonState }) {\r\n    return (\r\n        <div className={`popup ${isOpen && 'popup_opened'}`}\r\n            onClick={(e) => {if (e.target === e.currentTarget) onClose()}}\r\n        >\r\n        <div className='popup__container popup__container_position_center'>\r\n            <button className='popup__exit' type='button' onClick={onClose}></button>\r\n            <h2 className='popup__heading'>{title}</h2>\r\n            <form onSubmit={onSubmit} className={`form`} name={name}>\r\n                <fieldset className='form__input-container'>\r\n                    {children}\r\n                </fieldset>\r\n                <button disabled={buttonState} type='submit' className='form__save-button'>{buttonTxt}</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm","import React, { useCallback, useEffect, useState } from \"react\"\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nfunction Input ({ \r\n                name,\r\n                type, \r\n                inputRef,\r\n                validities,\r\n                setButtonState,\r\n                placeholder, \r\n                minLength, \r\n                maxLength,\r\n                isOpen,\r\n                additionalClass\r\n            }) {\r\n    const [inputError, setInputError] = useState('');\r\n    const [justOpened, setJustOpened] = useState(null);\r\n    const [inputTimer, setInputTimer] = useState(false);\r\n    const history = useHistory();\r\n\r\n    let validationTimer\r\n\r\n    const checkFormValidity = (evt) => {\r\n        // console.log(inputRef.current.validity.valid);\r\n        if (validities.some(a => !a.current.validity.valid)) {\r\n            setInputError(evt.target.validationMessage);\r\n            // console.log(evt.target.validationMessage);\r\n            setButtonState(true);\r\n        }\r\n        else {\r\n            setInputError('');\r\n            setButtonState(false);\r\n        }\r\n    }\r\n    \r\n    const handleChange = useCallback((e) => {\r\n        clearTimeout(validationTimer);\r\n        setInputTimer(false);\r\n        validationTimer = setTimeout(() => setInputTimer(true), 1000)\r\n        setJustOpened(true);\r\n        checkFormValidity(e);\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setJustOpened(null);\r\n        inputRef.current.addEventListener('input', handleChange);\r\n\r\n        return () => inputRef?.current?.removeEventListener('input', handleChange);\r\n    }, [isOpen, history])\r\n    \r\n    return (            \r\n    <label className='form__field'>\r\n    <input \r\n        type={type} \r\n        className={`form__input ${additionalClass} ${ \r\n            (inputTimer) &&\r\n            (justOpened !== null) && \r\n            (!inputRef.current?.validity.valid && 'form__input-invalid')}`} \r\n        id={`form-${name}`}\r\n        placeholder={placeholder}\r\n        minLength={minLength}\r\n        maxLength={maxLength}\r\n        ref={inputRef}\r\n        required\r\n    />\r\n    <span className={`form__error ${\r\n        (inputTimer) &&\r\n        (justOpened !== null) && \r\n        (!inputRef.current?.validity.valid && 'form__error_active')}`} >{inputError}</span>\r\n    </label>)\r\n}\r\n\r\nexport default Input","import React, { useState, useContext, useEffect, useRef } from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Input from './Input';\r\n\r\nfunction EditProfilePopup ({ onUpdateUser, isOpen, onClose }) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const nameInput = useRef();\r\n    const descriptionInput = useRef();\r\n    const [buttonState, setButtonState] = useState(false);\r\n    \r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name: nameInput.current.value,\r\n            about: descriptionInput.current.value,\r\n        },\r\n        setButtonState\r\n        );\r\n    }\r\n\r\n    useEffect(() => {\r\n        setButtonState(false)\r\n        nameInput.current.value = currentUser.name;\r\n        descriptionInput.current.value = currentUser.about;\r\n    }, [currentUser, isOpen]); \r\n\r\n    return (\r\n        <PopupWithForm\r\n        name='name'\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        title='Редактировать профиль'\r\n        buttonTxt='Сохранить'\r\n        buttonState={buttonState}\r\n        >\r\n            <Input \r\n                name='name'\r\n                type='text'\r\n                inputRef={nameInput}\r\n                validities={[nameInput, descriptionInput]}\r\n                setButtonState={setButtonState}\r\n                placeholder='Имя'\r\n                minLength='2'\r\n                maxLength='40'\r\n                isOpen={isOpen}\r\n            />\r\n            <Input \r\n                name='description'\r\n                type='text'\r\n                inputRef={descriptionInput}\r\n                validities={[descriptionInput, nameInput]}\r\n                setButtonState={setButtonState}\r\n                placeholder='О себе'\r\n                minLength='2'\r\n                maxLength='200'\r\n                isOpen={isOpen}\r\n            />\r\n    </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup","import React, { useState, useRef, useEffect } from 'react'\r\nimport Input from './Input';\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nfunction EditAvatarPopup({ onUpdateAvatar, isOpen, onClose }) {\r\n    const avatarInput = useRef();\r\n    const [buttonState, setButtonState] = useState(false);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onUpdateAvatar({ avatar: avatarInput.current.value }, setButtonState);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setButtonState(true);\r\n        avatarInput.current.value= '';\r\n    }, [isOpen])\r\n\r\n    return (\r\n        <PopupWithForm \r\n            name='avatar'\r\n            title='Обновить аватар'\r\n            buttonTxt='Сохранить'\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            buttonState={buttonState}\r\n        >\r\n            <Input \r\n                name='avatar'\r\n                type='url'\r\n                inputRef={avatarInput}\r\n                validities={[avatarInput]}\r\n                setButtonState={setButtonState}\r\n                placeholder='Ссылка на картинку'\r\n                isOpen={isOpen}\r\n            />\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup","import React, { useState, useEffect, useRef } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport Input from './Input';\r\n\r\nfunction AddPlacePopup ({ onAddPlace, isOpen, onClose }) {\r\n    const nameInput = useRef();\r\n    const linkInput = useRef();\r\n    const [buttonState, setButtonState] = useState(true);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onAddPlace({ name: nameInput.current.value, link: linkInput.current.value }, setButtonState)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setButtonState(true);\r\n        nameInput.current.value= '';\r\n        linkInput.current.value= '';\r\n    }, [isOpen])\r\n\r\n    return (\r\n        <PopupWithForm \r\n            name='card'\r\n            onSubmit={handleSubmit}\r\n            isOpen={isOpen}\r\n            onClose={() =>{\r\n                nameInput.current.value= '';\r\n                linkInput.current.value= '';\r\n                onClose();\r\n            }}\r\n            title='Новое место'\r\n            buttonTxt='Создать'\r\n            buttonState={buttonState}\r\n            >\r\n            <Input \r\n                name='place'\r\n                type='text'\r\n                inputRef={nameInput}\r\n                validities={[nameInput, linkInput]}\r\n                setButtonState={setButtonState}\r\n                placeholder='Название'\r\n                minLength='2'\r\n                maxLength='30'\r\n                isOpen={isOpen}\r\n            />\r\n            <Input \r\n                name='place-link'\r\n                type='url'\r\n                inputRef={linkInput}\r\n                validities={[linkInput, nameInput]}\r\n                setButtonState={setButtonState}\r\n                placeholder='Ссылка на картинку'\r\n                isOpen={isOpen}\r\n            />\r\n    </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup","import React from 'react'\r\n\r\nfunction ImagePopup ({ isOpen, card, onClose, cardName, cardId }) {\r\n    return (\r\n        <div className={`popup popup_content_picture  ${isOpen && 'popup_opened'}`}\r\n            onClick={(e) => {if (e.target === e.currentTarget) onClose()}}\r\n        >\r\n            <div className='popup__pic-container'>\r\n                <button className='popup__exit' onClick={onClose} type='button'></button>\r\n                <img className='popup__picture' src={card} key={cardId} alt='пейзаж' />\r\n                <p className='popup__picture-title'>{cardName}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup","import React, { useState } from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nfunction PopupWithDelete ({ isOpen, onClose, onDelete }) {\r\n    const [buttonState, setButtonState] = useState(false);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onDelete(setButtonState);\r\n    }\r\n\r\n    return (\r\n            <PopupWithForm\r\n                name='delete'\r\n                isOpen={isOpen}\r\n                onClose={onClose}\r\n                onSubmit={handleSubmit}\r\n                title='Вы уверены?'\r\n                buttonTxt='Удалить'\r\n                buttonState={buttonState}\r\n            >\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default PopupWithDelete","import React from 'react'\r\n\r\nfunction InfoToolTip ({ isOpen, onClose, statusPic, statusText }) {\r\n    return (\r\n        <div className={`popup ${isOpen && 'popup_opened'}`}\r\n            onClick={(e) => {if (e.target === e.currentTarget) onClose()}}\r\n        >\r\n            <div className='popup__container popup__container_position_center'>\r\n                <button onClick={onClose} className='popup__exit' type='button'></button>\r\n                <img className='popup__message-pic' alt='auth result message' src={statusPic}/>\r\n                <h2 className='popup__message'>{statusText}</h2>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoToolTip","class Api {\r\n    constructor ({ baseUrl, headers }) {\r\n        this._url = baseUrl\r\n        this._headers = headers\r\n    }  \r\n\r\n    _checkResponse(res) {\r\n        return res.ok ? res.json() : Promise.reject(`${res.status}`)\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'GET',\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'GET',\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }   \r\n    \r\n    redactProfile({ name, about }) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: `${name}`,\r\n                about: `${about}`\r\n            })\r\n            }).then(this._checkResponse)\r\n    }\r\n\r\n    redactAvatar({ avatar }) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: `${avatar}`,\r\n            })\r\n            }).then(this._checkResponse)\r\n    }\r\n\r\n    addCard({ name, link }) {\r\n        return fetch(`${this._url}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: `${name}`,\r\n                link: `${link}`\r\n            })\r\n            }).then(this._checkResponse)\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._url}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n            }).then(this._checkResponse)\r\n    }\r\n\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n        return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n            method: isLiked ? 'DELETE' : 'PUT',\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-24',\r\n    headers: {\r\n        'authorization': '43e71961-3715-4de8-9b86-f45dfa570664',\r\n        'Content-Type': 'application/json'\r\n    }\r\n})\r\n\r\nexport default api","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nfunction ProtectedRoute ({ path, loggedIn, children }) {\r\n    return (\r\n        <Route path={path}>\r\n            {(loggedIn !== null) && (loggedIn ? children : <Redirect to='/sign-up' />) }\r\n        </Route>\r\n    )\r\n}\r\n\r\nexport default ProtectedRoute","import React, { useState, useRef } from 'react'\r\nimport Input from './Input';\r\n\r\nfunction Login ({ onSubmit }) {\r\n    const emailInput = useRef();\r\n    const passwordInput = useRef();\r\n    const [buttonState, setButtonState] = useState(true);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onSubmit({\r\n            email: emailInput.current.value, \r\n            password: passwordInput.current.value\r\n        }, setButtonState);\r\n    }\r\n\r\n    return (\r\n        <div className='auth'>\r\n            <h2 className='auth__heading'>Вход</h2>\r\n            <form onSubmit={handleSubmit} className='form'>\r\n                <fieldset className='form__input-container form__input-container_theme_dark'>\r\n                <Input \r\n                    name='email-login'\r\n                    type='email'\r\n                    inputRef={emailInput}\r\n                    validities={[emailInput, passwordInput]}\r\n                    setButtonState={setButtonState}\r\n                    placeholder='Email'\r\n                    minLength='4'\r\n                    maxLength='30'\r\n                    additionalClass='form__input_theme_dark'\r\n                />\r\n                <Input \r\n                    name='password-login'\r\n                    type='password'\r\n                    inputRef={passwordInput}\r\n                    validities={[passwordInput, emailInput]}\r\n                    setButtonState={setButtonState}\r\n                    placeholder='Пароль'\r\n                    minLength='6'\r\n                    maxLength='30'\r\n                    additionalClass='form__input_theme_dark'\r\n                />\r\n                </fieldset>\r\n                <button \r\n                    disabled={buttonState}\r\n                    type='submit' \r\n                    className='form__save-button form__save-button_theme_dark'\r\n                >\r\n                Войти\r\n                </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import React, { useState, useRef } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Input from './Input';\r\n\r\nfunction Register ({ onSubmit }) {\r\n    const emailInput = useRef();\r\n    const passwordInput = useRef();\r\n    const [buttonState, setButtonState] = useState(true);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onSubmit({ \r\n            email: emailInput.current.value, \r\n            password: passwordInput.current.value\r\n        }, setButtonState);\r\n    }\r\n\r\n    return (\r\n        <div className='auth'>\r\n            <h2 className='auth__heading'>Регистрация</h2>\r\n            <form onSubmit={handleSubmit} className='form'>\r\n                <fieldset className='form__input-container form__input-container_theme_dark'>\r\n                <Input \r\n                    name='email-register'\r\n                    type='email'\r\n                    inputRef={emailInput}\r\n                    validities={[emailInput, passwordInput]}\r\n                    setButtonState={setButtonState}\r\n                    placeholder='Email'\r\n                    minLength='4'\r\n                    maxLength='30'\r\n                    additionalClass='form__input_theme_dark'\r\n                />\r\n                <Input \r\n                    name='password-register'\r\n                    type='password'\r\n                    inputRef={passwordInput}\r\n                    validities={[passwordInput, emailInput]}\r\n                    setButtonState={setButtonState}\r\n                    placeholder='Пароль'\r\n                    minLength='6'\r\n                    maxLength='30'\r\n                    additionalClass='form__input_theme_dark'\r\n                />\r\n                </fieldset>\r\n                <button \r\n                    disabled={buttonState} \r\n                    type='submit' \r\n                    className='form__save-button form__save-button_theme_dark'\r\n                >\r\n                Зарегистрироваться\r\n                </button>\r\n            </form>\r\n            <Link to='/sign-in' className='auth__if-registred'>Уже зарегистрированы? Войти</Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register","class ApiAuth {\r\n    constructor ({ baseUrl, headers }) {\r\n        this._url = baseUrl\r\n        this._headers = headers\r\n    }  \r\n\r\n    _checkResponse(res) {\r\n        return res.ok ? res.json() : Promise.reject(`${res.status}`)\r\n    }\r\n\r\n    signUp({ password, email }) {\r\n        return fetch(`${this._url}/signup`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                password: `${password}`,\r\n                email: `${email}`\r\n            })\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    signIn({ password, email }) {\r\n        return fetch(`${this._url}/signin`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                password: `${password}`,\r\n                email: `${email}`\r\n            })\r\n        }).then(this._checkResponse)\r\n    }\r\n        \r\n    checkToken() {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'GET',\r\n            headers: {\r\n                ...this._headers,\r\n                'Authorization' : `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n        }).then(this._checkResponse)\r\n    }\r\n}\r\n\r\nconst apiAuth = new ApiAuth({\r\n    baseUrl: 'https://auth.nomoreparties.co',\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n})\r\n\r\nexport default apiAuth","import apiAuth from \"../utils/apiAuth\";\r\n\r\nclass LoginService {\r\n    constructor() {\r\n        this.callbacks = [];\r\n    }\r\n\r\n    signIn({ email, password }) {\r\n        return apiAuth.signIn({ email, password })\r\n            .then(res => {\r\n                localStorage.setItem('token', res.token);\r\n                return res\r\n            })\r\n    }\r\n\r\n    signUp({ email, password }) {\r\n        return apiAuth.signUp({ email, password })\r\n    }\r\n\r\n    checkToken() {\r\n        return apiAuth.checkToken()\r\n            .then(res => {\r\n                this.emit(res);\r\n                return res\r\n            })\r\n    }\r\n\r\n    emit(data) {\r\n        this.callbacks.forEach(cb => cb(data))\r\n    }\r\n\r\n    on(cb) {\r\n        this.callbacks.push(cb);\r\n    }\r\n}\r\n\r\nexport const loginService = new LoginService();","import React, { useCallback, useState, useEffect } from 'react';\r\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\nimport success from '../images/auth-success.svg';\r\nimport fail from '../images/auth-fail.svg';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport EditProfilePopup from './EditProfilePopup'\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport PopupWithDelete from './PopupWithDelete';\r\nimport InfoToolTip from './InfoTooltip';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport { loginService } from './LoginService';\r\n\r\nfunction App() {\r\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n    const [isAddPlaceOpen, setIsAddPlaceOpen] = useState(false);\r\n    const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n    const [selectedCard, setSelectedCard] = useState(null);\r\n    const [selectedCardName, setSelectedCardName] = useState(null);\r\n    const [selectedCardId, setSelectedCardId] = useState(null);\r\n    const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false);\r\n    const [cardToBeDeleted, setCardToBeDeleted] = useState(null);\r\n    const [isAuthStatusPopupOpen, setIsAuthStatusPopupOpen] = useState(false);\r\n    const [authStatusPic, setAuthStatusPic] = useState('');\r\n    const [authStatusText, setAuthStatusText] = useState('');\r\n\r\n    const [cards, setCards] = useState([]);\r\n    const [currentUser, setCurrentUser] = useState({\r\n        name: '',\r\n        about: '',\r\n        avatar: ''\r\n    });\r\n    const [email, setEmail] = useState('');\r\n    const [loggedIn, setLoggedIn] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const history = useHistory();\r\n    \r\n    const handleEscClose = useCallback((e) => {\r\n        if (e.key === 'Escape') closeAllPopups();\r\n    }, [])\r\n        \r\n    const closeAllPopups = () => {\r\n        setIsEditAvatarPopupOpen(false);\r\n        setIsEditProfilePopupOpen(false);\r\n        setIsAddPlaceOpen(false);\r\n        setIsImagePopupOpen(false);\r\n        setIsDeletePopupOpen(false);\r\n        setIsAuthStatusPopupOpen(false);\r\n\r\n        document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n    \r\n    const handleEditAvatarClick = () => {\r\n        setIsEditAvatarPopupOpen(true);\r\n        \r\n        document.addEventListener('keydown', handleEscClose);\r\n    }\r\n    \r\n    const handleEditProfileClick = () => {\r\n        setIsEditProfilePopupOpen(true);\r\n        \r\n        document.addEventListener('keydown', handleEscClose);\r\n    }\r\n    \r\n    const handleAddPlaceClick = () => {\r\n        setIsAddPlaceOpen(true);\r\n        \r\n        document.addEventListener('keydown', handleEscClose);\r\n    }\r\n\r\n    const handleDeletePopupOpen = (card) => {\r\n        setIsDeletePopupOpen(true);\r\n        setCardToBeDeleted(card);\r\n    } \r\n\r\n    const handleAuthStatusPopup = ({ result, text }) => {\r\n        setIsAuthStatusPopupOpen(true);\r\n        result ? setAuthStatusPic(success) : setAuthStatusPic(fail);\r\n        setAuthStatusText(text);\r\n        \r\n        document.addEventListener('keydown', handleEscClose);\r\n    }\r\n    \r\n    const handleUpdateUser = (data, setButtonState) => {\r\n        setButtonState(true)\r\n\r\n        api.redactProfile(data)\r\n        .then((res) => {\r\n            setCurrentUser(res);\r\n            closeAllPopups();\r\n        })\r\n        .catch((e) => console.log(e))\r\n        .finally(() => setButtonState(false))\r\n    }\r\n\r\n    const handleUpdateAvatar = (data, setButtonState) => {\r\n        setButtonState(true)\r\n\r\n        api.redactAvatar(data)\r\n        .then((res) => {\r\n            setCurrentUser(res);\r\n            closeAllPopups();\r\n        })\r\n        .catch((e) => console.log(e))\r\n        .finally(() => setButtonState(false))\r\n    }    \r\n\r\n    const handleAddPlaceSubmit = (data, setButtonState) => {\r\n        setButtonState(true)\r\n\r\n        return api.addCard(data)\r\n        .then(res => {\r\n            setCards([res, ...cards]);\r\n            closeAllPopups();\r\n        })\r\n        .catch((e) => console.log(e))\r\n        .finally(() => setButtonState(false))\r\n    }\r\n        \r\n    const handleCardClick = ([link, description, id]) => {\r\n        setSelectedCardId(id);\r\n        setSelectedCard(link);\r\n        setIsImagePopupOpen(true);\r\n        setSelectedCardName(description);\r\n        \r\n        document.addEventListener('keydown', handleEscClose);\r\n    }\r\n    \r\n    const handleCardLike = (card) => {\r\n        const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n        api.changeLikeCardStatus(card._id, isLiked)\r\n        .then((newCard) => setCards(state => state.map((c) => c._id === card._id ? newCard : c)))\r\n        .catch((e) => console.log(e))\r\n    }\r\n\r\n    const handleCardDelete = (setButtonState) => {\r\n        setButtonState(true)\r\n        api.deleteCard(cardToBeDeleted._id)\r\n        .then(() => setCards(state => state.filter(c => c._id !== cardToBeDeleted._id)))\r\n        .catch(e => console.log(e))\r\n        .finally(() => {\r\n            closeAllPopups();\r\n            setButtonState(false);\r\n        })\r\n    }\r\n\r\n    const checkToken = () => {\r\n        loginService.checkToken()\r\n        .then(() => {\r\n            history.push('/cards');\r\n        })\r\n        .catch(e => {\r\n            setLoggedIn(false);\r\n            localStorage.removeItem('token');\r\n            console.log(e);\r\n        })\r\n    }\r\n\r\n    const handleRegister = ({ email, password }, setButtonState) => {\r\n        setButtonState(true);\r\n        loginService.signUp({ email, password })\r\n        .then(() => {\r\n            handleAuthStatusPopup({ result: true, text: 'Вы успешно зарегистрировались!' });\r\n            // Авторизация при успешной регистрации\r\n            setTimeout(() =>\r\n                loginService.signIn({ email, password })\r\n                .then(data => checkToken(data))\r\n                .catch(() => history.push('/sign-in'))\r\n            , 500)\r\n        })\r\n        .catch((res) => {\r\n            handleAuthStatusPopup({ result: false, text: 'Что-то пошло не так! Попробуйте ещё раз.' });\r\n            console.log(res);\r\n        })\r\n        .finally(() => setButtonState(false))\r\n    }\r\n    \r\n    const handleLogin = ({ email, password }, setButtonState) => {\r\n        setButtonState(true);\r\n        loginService.signIn({ email, password })\r\n        .then(res => checkToken(res))\r\n        .catch((res) => {\r\n            handleAuthStatusPopup({ result: false, text: 'Что-то пошло не так! Попробуйте ещё раз.' });\r\n            console.log(res);\r\n        })\r\n        .finally(() => setButtonState(false))\r\n    }\r\n\r\n    useEffect(() => {\r\n        loginService.on(() => { setLoggedIn(true) });\r\n        loginService.on((info) => { setEmail(info?.data?.email) });\r\n        checkToken();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        Promise.all([api.getUserInfo(), api.getCards()])\r\n        .then(([userData, cardsData]) => {\r\n            setCurrentUser(userData);\r\n            setCards(cardsData);\r\n        })\r\n        .catch((e) => console.log(e))\r\n        .finally(() => setLoading(false))\r\n    }, [])\r\n\r\n    return (\r\n    <div className='App'>\r\n    <div className={`page ${loading && 'page_loading'}`}>\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n\r\n    <Switch>\r\n    <Route exact path='/'><Redirect to='/cards' /></Route>\r\n\r\n    {/* Регистрация */}\r\n    <Route path='/sign-up'>\r\n        <Header logoPic={logo} headerLinkTitle='Войти' headerLink='/sign-in'/>\r\n        <Register onSubmit={handleRegister} />\r\n    </Route>\r\n        \r\n    {/* Вход */}\r\n    <Route  path='/sign-in'>\r\n        <Header logoPic={logo} headerLinkTitle='Регистрация' headerLink='/sign-up'/>\r\n        <Login onSubmit={handleLogin} />\r\n    </Route>\r\n\r\n    <ProtectedRoute path='/cards' loggedIn={loggedIn}>\r\n        <Header  \r\n            setLoggedIn={setLoggedIn}\r\n            logoPic={logo}\r\n            headerLinkTitle='Выйти' \r\n            headerLink='/sign-in' \r\n            email={email}\r\n            loading={loading}\r\n            headerBurger\r\n        />\r\n        <Main \r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleDeletePopupOpen}\r\n            onEditProfile={handleEditProfileClick} \r\n            onEditAvatar={handleEditAvatarClick} \r\n            onAddPlace={handleAddPlaceClick} \r\n            onCardClick={handleCardClick}\r\n        />\r\n        <Footer />\r\n    </ProtectedRoute>\r\n\r\n    <Route path='*'>\r\n        <Header logoPic={logo} headerLinkTitle='Войти' headerLink='/sign-in'/>\r\n        <h1 className=\"not-found\">404:(</h1>\r\n    </Route>\r\n    </Switch>\r\n\r\n    <section className='popups' aria-label='всплывающие окна'>\r\n        <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser}\r\n        />\r\n        <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <AddPlacePopup \r\n            isOpen={isAddPlaceOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n        <ImagePopup \r\n            isOpen={isImagePopupOpen}\r\n            onClose={closeAllPopups}\r\n            card={selectedCard}\r\n            cardName={selectedCardName}\r\n            cardId={selectedCardId}\r\n        />\r\n        <PopupWithDelete \r\n            isOpen={isDeletePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onDelete={handleCardDelete}\r\n        />\r\n        <InfoToolTip\r\n            isOpen={isAuthStatusPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAuthStatus={handleAuthStatusPopup}\r\n            statusPic={authStatusPic}\r\n            statusText={authStatusText}\r\n        />\r\n    </section>\r\n\r\n    </CurrentUserContext.Provider>\r\n    </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename=\"/react-mesto-auth/\">\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}